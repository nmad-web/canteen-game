<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Canteen Game</title>
<style>
  body {
    margin: 0;
    background: #111;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  canvas {
    background: #000;
  }
</style>
</head>

<body>
<canvas id="game" width="360" height="480"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let paddleX = 140;
const paddleWidth = 80;
const paddleHeight = 10;

let ballX = 180;
let ballY = 20;
let dx = 2;
let dy = 2;

const paddleSpeed = 7;

// Keyboard controls (Laptop)
document.addEventListener("keydown", e => {
  if (e.key === "ArrowLeft") paddleX -= paddleSpeed;
  if (e.key === "ArrowRight") paddleX += paddleSpeed;
});

// Gyroscope controls (Mobile)
if (window.DeviceOrientationEvent) {
  window.addEventListener("deviceorientation", e => {
    if (e.gamma !== null) {
      paddleX += e.gamma * 0.6;
    }
  });
}

function gameLoop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Paddle
  ctx.fillStyle = "white";
  ctx.fillRect(paddleX, canvas.height - 20, paddleWidth, paddleHeight);

  // Ball
  ctx.beginPath();
  ctx.arc(ballX, ballY, 6, 0, Math.PI * 2);
  ctx.fill();

  // Move ball
  ballX += dx;
  ballY += dy;

  // Wall collisions
  if (ballX <= 0 || ballX >= canvas.width) dx *= -1;
  if (ballY <= 0) dy *= -1;

  // Paddle collision
  if (
    ballY >= canvas.height - 26 &&
    ballX > paddleX &&
    ballX < paddleX + paddleWidth
  ) {
    dy *= -1;
  }

  // Miss = reset
  if (ballY > canvas.height) {
    ballX = 180;
    ballY = 20;
    dy = 2;
  }

  // Paddle bounds
  paddleX = Math.max(0, Math.min(canvas.width - paddleWidth, paddleX));

  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
